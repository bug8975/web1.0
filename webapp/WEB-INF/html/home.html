<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>主页</title>
<meta name="keywords" content="$!config.keywords" />
<meta name="description" content="$!config.description" />
<!--<link rel="shortcut icon" type="image/x-icon" href="$!webPath/resources/style/common/images/favicon.ico" />-->
<link href="$!webPath/resources/style/common/css/public_hj.css"
	rel="stylesheet" type="text/css" />
<link href="$!webPath/resources/style/common/css/index_hj.css"
	rel="stylesheet" type="text/css" />
<link href="$!webPath/resources/css/user.css" type="text/css"
	rel="stylesheet" />

<link rel="stylesheet" type="text/css"
	href="$!webPath/resources/bootstrap/css/cloud-admin.css" />
<link rel="stylesheet" type="text/css"
	href="$!webPath/resources/bootstrap/css/themes/default.css"
	id="skin-switcher" />
<link rel="stylesheet" type="text/css"
	href="$!webPath/resources/bootstrap/css/responsive.css" />

<!-- STYLESHEETS -->
<!--[if lt IE 9]><script src="js/flot/excanvas.min.js"></script><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script><![endif]-->
<link
	href="$!webPath/resources/bootstrap/font-awesome/css/font-awesome.min.css"
	rel="stylesheet" />
<!-- ANIMATE -->
<link rel="stylesheet" type="text/css"
	href="$!webPath/resources/bootstrap/css/animatecss/animate.min.css" />
<!-- DATE RANGE PICKER -->
<link rel="stylesheet" type="text/css"
	href="$!webPath/resources/bootstrap/js/bootstrap-daterangepicker/daterangepicker-bs3.css" />
<!-- TODO -->
<link rel="stylesheet" type="text/css"
	href="$!webPath/resources/bootstrap/js/jquery-todo/css/styles.css" />
<!-- FULL CALENDAR -->
<link rel="stylesheet" type="text/css"
	href="$!webPath/resources/bootstrap/js/fullcalendar/fullcalendar.min.css" />
<!-- GRITTER -->
<link rel="stylesheet" type="text/css"
	href="$!webPath/resources/bootstrap/js/gritter/css/jquery.gritter.css" />
<!-- FONTS -->
<link href='http://fonts.useso.com/css?family=Open+Sans:300,400,600,700'
	rel='stylesheet' type='text/css' />
<!-- 自定义CSS样式 -->
<link rel="stylesheet" type="text/css"
	href="$!webPath/resources/bootstrap/css/custom/default.css" />
<script type="text/javascript"
	src="$!webPath/resources/js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="$!webPath/resources/js/public_hj.js"></script>
<script src="$!webPath/resources/js/jquery-1.6.2.js"></script>
<script src="$!webPath/resources/js/jquery-ui-1.8.21.js"></script>
<script src="$!webPath/resources/js/jquery.shop.common.js"></script>
<!--引用百度地图API-->
<script type="text/javascript"
	src="http://api.map.baidu.com/api?v=2.0&ak=zFXHe6mTc5weUGVjgqptlvHfQaXZdU56"></script>
</head>

<body class="info">
	<!-- 头部页眉 -->
	$!httpInclude.include("/common/top.htm")
	<!-- over -->

	<!-- PAGE -->
	<section id="page"> <!-- 侧边栏 -->
	$!httpInclude.include("/common/menu_nav.htm") <!-- over -->
	<div id="main-content">
		<!-- SAMPLE BOX CONFIGURATION MODAL FORM-->

		<!-- /SAMPLE BOX CONFIGURATION MODAL FORM-->
		<div class="container">
			<div class="row">
				<div id="content" class="col-lg-12">
					<!-- DASHBOARD CONTENT -->
					<!-- BIM三维模型 -->
					<!-- DASHBOARD CONTENT -->
					<div class="row">
						<table width="100%" border="0" cellspacing="0" cellpadding="0"
							class="user_table">
							<tr>
								<td id="centerbg" valign="top">
									<div class="productmain"
										style="position: absolute; left: 0; width: 99.5%; height: 110%;">
										<!--百度地图容器-->
										<div
											style="width: 100%; height: 100%; border: #ccc solid 1px; font-size: 12px"
											id="map"></div>
									</div>
								</td>
							</tr>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	</section>

</body>
<script type="text/javascript">
    //创建和初始化地图函数：
    function initMap(){
      createMap();//创建地图
      setMapEvent();//设置地图事件
      addMapControl();//向地图添加控件
      addMapOverlay();//向地图添加覆盖物
    }
    function createMap(){ 
      map = new BMap.Map("map"); 
      map.centerAndZoom(new BMap.Point(120.633493,31.329433),11);
    }
    function setMapEvent(){
      map.enableScrollWheelZoom();
      map.enableKeyboard();
      map.enableDragging();
      map.enableDoubleClickZoom()
    }
    function addClickHandler(target,window){
      target.addEventListener("click",function(){
        target.openInfoWindow(window);
      });
    }
/*     function addMapOverlay(){
      var markers = [
        {content:"",title:"苏州拙政园",imageOffset: {width:-46,height:-21},position:{lat:31.330497,lng:120.635577}}
      ];
      for(var index = 0; index < markers.length; index++ ){
        var point = new BMap.Point(markers[index].position.lng,markers[index].position.lat);
        var marker = new BMap.Marker(point,{icon:new BMap.Icon("http://api.map.baidu.com/lbsapi/createmap/images/icon.png",new BMap.Size(20,25),{
          imageOffset: new BMap.Size(markers[index].imageOffset.width,markers[index].imageOffset.height)
        })});
        var label = new BMap.Label(markers[index].title,{offset: new BMap.Size(25,5)});
        var opts = {
          width: 200,
          title: markers[index].title,
          enableMessage: false
        };
        var infoWindow = new BMap.InfoWindow(markers[index].content,opts);
        marker.setLabel(label);
        addClickHandler(marker,infoWindow);
        map.addOverlay(marker);
      };
    } */
    
    function addMapOverlay(){
        var markers = [
          {content:"",title:"拙政园",imageOffset: {width:-46,height:-21},position:{lat:31.330497,lng:120.635577}}
        ];
        for(var index = 0; index < markers.length; index++ ){
          var point = new BMap.Point(markers[index].position.lng,markers[index].position.lat);
          var marker = new BMap.Marker(point,{icon:new BMap.Icon("http://api.map.baidu.com/lbsapi/createmap/images/icon.png",new BMap.Size(20,25),{
            imageOffset: new BMap.Size(markers[index].imageOffset.width,markers[index].imageOffset.height)
          })});
          var label = new BMap.Label(markers[index].title,{offset: new BMap.Size(25,5)});
          var opts = {
            width: 200,
            title: markers[index].title,
            enableMessage: false
          };
          var sContent =  "<h4 style='margin:0 0 5px 0;padding:0.2em 0'><b>苏州拙政园</b>&nbsp;&nbsp;&nbsp;<a style='padding-left:40px;font-size:0.7em;color:blue'href='$!webPath/monitordata/bimViz.htm'>查看三维模型</a></h4>" +
          "<img style='float:left;margin:1px' id='imgDemo' src='$!webPath/resources/images/zzy.jpg' width='240' height='104' title='拙政园'/>" +
          "</div>";
          marker.setLabel(label);
          addClickHandler(sContent,marker);
          map.addOverlay(marker);
        };
      }
    function addClickHandler(sContent,marker){
        marker.addEventListener("click",function(e){
            openInfo(sContent,e)}
        );
    }
    function openInfo(sContent,e){
        var p = e.target;
        var point = new BMap.Point(p.getPosition().lng, p.getPosition().lat);
        var infoWindow = new BMap.InfoWindow(sContent);  // 创建信息窗口对象
        map.openInfoWindow(infoWindow,point); //开启信息窗口
        map.centerAndZoom(new BMap.Point(120.635613,31.329911),19);
    }

    //向地图添加控件
    function addMapControl(){
      var scaleControl = new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});
      scaleControl.setUnit(BMAP_UNIT_IMPERIAL);
      map.addControl(scaleControl);
      var navControl = new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});
      map.addControl(navControl);
      var overviewControl = new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,isOpen:true});
      map.addControl(overviewControl);
    }
    var map;
      initMap();
  </script>
  <!-- JAVASCRIPTS -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- JQUERY -->
    <script
        src="$!webPath/resources/bootstrap/js/jquery/jquery-2.0.3.min.js"></script>
    <!-- JQUERY UI-->
    <script
        src="$!webPath/resources/bootstrap/js/jquery-ui-1.10.3.custom/js/jquery-ui-1.10.3.custom.min.js"></script>
    <!-- BOOTSTRAP -->
    <script
        src="$!webPath/resources/bootstrap/bootstrap-dist/js/bootstrap.min.js"></script>


    <!-- DATE RANGE PICKER -->
    <script
        src="$!webPath/resources/bootstrap/js/bootstrap-daterangepicker/moment.min.js"></script>

    <script
        src="$!webPath/resources/bootstrap/js/bootstrap-daterangepicker/daterangepicker.min.js"></script>
    <!-- SLIMSCROLL -->
    <script type="text/javascript"
        src="$!webPath/resources/bootstrap/js/jQuery-slimScroll-1.3.0/jquery.slimscroll.min.js"></script>
    <!-- SLIMSCROLL -->
    <script type="text/javascript"
        src="$!webPath/resources/bootstrap/js/jQuery-slimScroll-1.3.0/jquery.slimscroll.min.js"></script>
    <script type="text/javascript"
        src="$!webPath/resources/bootstrap/js/jQuery-slimScroll-1.3.0/slimScrollHorizontal.min.js"></script>
    <!-- BLOCK UI -->
    <script type="text/javascript"
        src="$!webPath/resources/bootstrap/js/jQuery-BlockUI/jquery.blockUI.min.js"></script>
    <!-- SPARKLINES -->
    <script type="text/javascript"
        src="$!webPath/resources/bootstrap/js/sparklines/jquery.sparkline.min.js"></script>
    <!-- EASY PIE CHART -->
    <script
        src="$!webPath/resources/bootstrap/js/jquery-easing/jquery.easing.min.js"></script>
    <script type="text/javascript"
        src="$!webPath/resources/bootstrap/js/easypiechart/jquery.easypiechart.min.js"></script>
    <!-- FLOT CHARTS -->
    <script src="$!webPath/resources/bootstrap/js/flot/jquery.flot.min.js"></script>
    <script
        src="$!webPath/resources/bootstrap/js/flot/jquery.flot.time.min.js"></script>
    <script
        src="$!webPath/resources/bootstrap/js/flot/jquery.flot.selection.min.js"></script>
    <script
        src="$!webPath/resources/bootstrap/js/flot/jquery.flot.resize.min.js"></script>
    <script
        src="$!webPath/resources/bootstrap/js/flot/jquery.flot.pie.min.js"></script>
    <script
        src="$!webPath/resources/bootstrap/js/flot/jquery.flot.stack.min.js"></script>
    <script
        src="$!webPath/resources/bootstrap/js/flot/jquery.flot.crosshair.min.js"></script>
    <!-- TODO -->
    <script type="text/javascript"
        src="$!webPath/resources/bootstrap/js/jquery-todo/js/paddystodolist.js"></script>
    <!-- TIMEAGO -->
    <script type="text/javascript"
        src="$!webPath/resources/bootstrap/js/timeago/jquery.timeago.min.js"></script>
    <!-- FULL CALENDAR -->
    <script type="text/javascript"
        src="$!webPath/resources/bootstrap/js/fullcalendar/fullcalendar.min.js"></script>
    <!-- COOKIE -->
    <script type="text/javascript"
        src="$!webPath/resources/bootstrap/js/jQuery-Cookie/jquery.cookie.min.js"></script>
    <!-- GRITTER -->
    <script type="text/javascript"
        src="$!webPath/resources/bootstrap/js/gritter/js/jquery.gritter.min.js"></script>
    <!-- CUSTOM SCRIPT -->
    <script src="$!webPath/resources/bootstrap/js/script.js"></script>
    <script>
        jQuery(document).ready(function() {
            App.setPage("Home"); //Set current page
            App.init(); //Initialise plugins and elements
        });
    </script>
</html>